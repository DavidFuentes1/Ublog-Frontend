<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <!--CSS BOOTSTRAP-->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous" />
        <title>UBlog</title>
    </head>
<body style="background-color:#454DDE;">
    <!-- NAVBAR -->
	<nav class="navbar navbar-dark bg-dark">
		<a class="navbar-brand" style="margin-left: 20px" href="#">
			<img
					src="./assets/Ublog_logo.png"
					width="120"
					height="50"
					class="d-inline-block align-top"
					alt=""
				/>
			  </a>
			  <ul class="nav">
				<li class="nav-item">
				  <a class="nav-link active" aria-current="page" href="index.html">Ublog</a>
				</li>
				<li class="nav-item">
				  <a class="nav-link" href="signup.html">Signup</a>

			  </ul>	  
	</nav>
	<!-- login-->

	<div class="container">
		<div class="row">
			<div class="col-sm" style="margin: 300px">
				<h1 class="text-center mb-5">Login</h1>
				<form id="loginForm">
					<div class="form-group">
						<label for="loginEmail">Email</label>
						<input
							type="email"
							class="form-control"
							id="loginEmail"
							aria-describedby="nicknameHelp"
							placeholder="Enter your nickname"
						/>
					</div>
					<div class="form-group">
						<label for="loginPassword">Password</label>
						<input
							type="password"
							class="form-control"
							id="loginPassword"
							placeholder="Enter your password"
						/>
					</div>
					<br />
					<button id="loginButton" type="submit" class="btn btn-success w-100">
						Login
					</button>
				</form>
			</div>
			<div class="col-sm" style="margin: 300px"></div>
		</div>
	</div>		

	<!--SCRIPT LOGIN-->
	<script>
		let loginForm = document.getElementById("loginForm");
			let loginEmail = document.getElementById("loginEmail");
			let loginPassword = document.getElementById("loginPassword");
			let loginButton = document.getElementById("loginButton");
			loginForm.addEventListener("submit", (e) => {
				e.preventDefault();
			});
			loginButton.addEventListener("click", (e) => {
				const credentials = {
					email: loginEmail.value,
					password: loginPassword.value,
				};
				console.log(credentials);
				fetch("http://localhost:5000/login", {
					method: "POST",
					headers: {
						"content-type": "application/json",
					},
					body: JSON.stringify(credentials),
				})
					.then((response) => response.json())
					.then((data) => {
						if (data.message) {
							console.error(data);
							window.alert("Credenciales Incorrectas")
						} else {
							
							window.location = "home.html" ;
						}
					})
					.catch((error) => console.error(error));
			});

	</script>		
    <!--SCRIPT BOOTSTRAP-->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
</body>
</html>